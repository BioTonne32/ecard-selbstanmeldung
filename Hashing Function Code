DROP FUNCTION hashPW;
DELIMITER $$
create function hashPW(password TEXT, salt TEXT, count INT)
	RETURNS TEXT
	BEGIN
		DECLARE hash TEXT;
		SET hash = CONCAT(salt ,'.' , password);
		iteration: LOOP
	  	IF count > 0 THEN
	  		SET hash = SHA2(hash, 224);
				SET count = count - 1;
			ELSE
				LEAVE iteration;
			END IF;
		END LOOP;
		RETURN hash;
	END;
$$
DELIMITER ;
